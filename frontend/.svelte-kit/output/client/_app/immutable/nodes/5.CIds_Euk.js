import{f as G,a as i,t as A,s as D,e as K}from"../chunks/B35PcQGF.js";import{o as oe}from"../chunks/lRhbJWai.js";import{p as le,d as ne,e as de,i as a,k as c,g as t,s as n,$ as ie,j as e,f as O,r as u,n as f,t as M}from"../chunks/BZjX7xHU.js";import{i as j,a as ce,b as ue}from"../chunks/D9uJM2wH.js";import{h as me,a as Q}from"../chunks/DQl7avGA.js";import{g as pe}from"../chunks/DCM3-_mG.js";import{p as fe}from"../chunks/CYzuYic3.js";import{a as ve}from"../chunks/BAylat5N.js";import{B as T}from"../chunks/D5w3vmtt.js";import{I as N}from"../chunks/x5lqHpA1.js";import{C as V,A as F}from"../chunks/kp9I4jKG.js";var be=G('<h2 class="text-xl font-semibold mb-1">Erster Start</h2> <p class="text-sm text-gray-400 mb-4">Es existieren noch keine Benutzer. Erstelle den ersten Admin-Account.</p> <!> <form class="space-y-4"><div><label class="label" for="bootstrap-username">Benutzername</label> <!></div> <div><label class="label" for="bootstrap-password">Passwort</label> <!></div> <!></form>',1),he=G('<h2 class="text-xl font-semibold mb-1">Anmelden</h2> <p class="text-sm text-gray-400 mb-4">Melde dich mit deinem Account an</p> <!> <!> <form class="space-y-4"><div><label class="label" for="username">Benutzername</label> <!></div> <div><label class="label" for="password">Passwort</label> <!></div> <!></form> <div class="mt-6 pt-4 border-t border-white/10 text-center"><p class="text-sm text-gray-400">Noch kein Account? <a href="/register" class="link">Registrieren</a></p></div>',1),ge=G(`<div class="min-h-screen flex items-center justify-center p-4"><div class="w-full max-w-md space-y-6"><div class="text-center"><div class="inline-flex items-center gap-3 mb-4"><div class="
						w-12 h-12 rounded-2xl
						bg-gradient-to-br from-royal-400 to-royal-700
						shadow-lg shadow-royal-600/40
						border border-white/10
					"></div> <div class="text-left"><p class="font-bold tracking-wider uppercase">Actindo Middleware</p> <p class="text-sm text-gray-400">Dashboard Login</p></div></div></div> <!> <!></div></div>`);function Le(W,X){le(X,!0);const Y=()=>ue(fe,"$page",Z),[Z,ee]=ce();let v=n(""),b=n(""),P=n(""),k=n(!1),S=n(!1),h=n(""),g=n(""),B=n(!1),E=n(""),U=n(!1);oe(async()=>{try{const s=await Q.bootstrapNeeded();t(S,s.needed,!0)}catch{}});async function te(s){if(s.preventDefault(),!(!e(v).trim()||!e(b).trim())){t(k,!0),t(P,"");try{await ve.login(e(v),e(b));const l=Y().url.searchParams.get("returnUrl")??"/";pe(l)}catch(l){t(P,l instanceof Error?l.message:"Login fehlgeschlagen",!0)}finally{t(k,!1)}}}async function re(s){if(s.preventDefault(),!(!e(h).trim()||!e(g).trim())){t(B,!0),t(E,"");try{await Q.bootstrap({username:e(h),password:e(g)}),t(U,!0),t(S,!1),t(v,e(h),!0),t(b,e(g),!0)}catch(l){t(E,l instanceof Error?l.message:"Bootstrap fehlgeschlagen",!0)}finally{t(B,!1)}}}var C=ge();me("1x05zx6",s=>{de(()=>{ie.title="Login | Actindo Middleware"})});var H=c(C),J=a(c(H),2);{var ae=s=>{V(s,{class:"gradient-border",children:(l,I)=>{var $=be(),z=a(O($),4);{var L=o=>{F(o,{variant:"error",class:"mb-4",children:(r,d)=>{f();var p=A();M(()=>D(p,e(E))),i(r,p)},$$slots:{default:!0}})};j(z,o=>{e(E)&&o(L)})}var _=a(z,2),m=c(_),x=a(c(m),2);N(x,{id:"bootstrap-username",placeholder:"admin",autocomplete:"username",required:!0,get value(){return e(h)},set value(o){t(h,o,!0)}}),u(m);var w=a(m,2),y=a(c(w),2);N(y,{id:"bootstrap-password",type:"password",placeholder:"********",autocomplete:"new-password",required:!0,get value(){return e(g)},set value(o){t(g,o,!0)}}),u(w);var R=a(w,2);T(R,{type:"submit",get disabled(){return e(B)},class:"w-full",children:(o,r)=>{f();var d=A();M(()=>D(d,e(B)?"Erstelle...":"Admin erstellen")),i(o,d)},$$slots:{default:!0}}),u(_),K("submit",_,re),i(l,$)},$$slots:{default:!0}})};j(J,s=>{e(S)&&!e(U)&&s(ae)})}var se=a(J,2);V(se,{class:"gradient-border",children:(s,l)=>{var I=he(),$=a(O(I),4);{var z=r=>{F(r,{variant:"error",class:"mb-4",children:(d,p)=>{f();var q=A();M(()=>D(q,e(P))),i(d,q)},$$slots:{default:!0}})};j($,r=>{e(P)&&r(z)})}var L=a($,2);{var _=r=>{F(r,{variant:"success",class:"mb-4",children:(d,p)=>{f();var q=A("Admin-Account erstellt! Du kannst dich jetzt anmelden.");i(d,q)},$$slots:{default:!0}})};j(L,r=>{e(U)&&r(_)})}var m=a(L,2),x=c(m),w=a(c(x),2);N(w,{id:"username",placeholder:"username",autocomplete:"username",required:!0,get value(){return e(v)},set value(r){t(v,r,!0)}}),u(x);var y=a(x,2),R=a(c(y),2);N(R,{id:"password",type:"password",placeholder:"********",autocomplete:"current-password",required:!0,get value(){return e(b)},set value(r){t(b,r,!0)}}),u(y);var o=a(y,2);T(o,{type:"submit",get disabled(){return e(k)},class:"w-full",children:(r,d)=>{f();var p=A();M(()=>D(p,e(k)?"Anmelden...":"Anmelden")),i(r,p)},$$slots:{default:!0}}),u(m),f(2),K("submit",m,te),i(s,I)},$$slots:{default:!0}}),u(H),u(C),i(W,C),ne(),ee()}export{Le as component};
