import{c as P,a as i,f as z,s as J}from"../chunks/B35PcQGF.js";import{o as he}from"../chunks/lRhbJWai.js";import{f as w,k as d,i as v,r as n,t as T,p as ie,j as e,u as p,n as le,d as de,z as te,e as ge,$ as xe}from"../chunks/BZjX7xHU.js";import{l as ce,s as me,p as be,i as M,a as ue,b as C}from"../chunks/D9uJM2wH.js";import{I as ve,s as pe,f as V,g as Y,e as re,i as ae,h as _e,b as se}from"../chunks/DQl7avGA.js";import{p as fe}from"../chunks/CYzuYic3.js";import{g as ye}from"../chunks/DCM3-_mG.js";import{a as Z,p as we,c as $e,i as Se}from"../chunks/BAylat5N.js";import{d as ee}from"../chunks/DPAJ9e7j.js";import{c as oe}from"../chunks/DFF8xD2t.js";import{B as Ae}from"../chunks/D5w3vmtt.js";import"../chunks/_G6KF_sA.js";import{P as Pe}from"../chunks/D00jxTIR.js";import{U as ze}from"../chunks/DFFVY5vM.js";import{A as ke}from"../chunks/B2p6WnG4.js";import{A as Ue}from"../chunks/Dm33E0_h.js";import{C as Ce}from"../chunks/P2UTRTYh.js";import{S as Oe}from"../chunks/DZ7fo_3M.js";import{S as Ne}from"../chunks/BMMDD9hE.js";function je(g,o){const x=ce(o,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];ve(g,me({name:"layout-dashboard"},()=>x,{get iconNode(){return b},children:(_,c)=>{var l=P(),f=w(l);pe(f,o,"default",{}),i(_,l)},$$slots:{default:!0}}))}function Le(g,o){const x=ce(o,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}],["polyline",{points:"16 17 21 12 16 7"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12"}]];ve(g,me({name:"log-out"},()=>x,{get iconNode(){return b},children:(_,c)=>{var l=P(),f=w(l);pe(f,o,"default",{}),i(_,l)},$$slots:{default:!0}}))}var Me=z("<div><span></span> <span> </span></div>");function ne(g,o){let x=be(o,"tooltip",3,"");const b={ok:"bg-emerald-500/15 border-emerald-500/40 text-emerald-400",warning:"bg-amber-500/15 border-amber-500/40 text-amber-400",error:"bg-red-500/15 border-red-500/40 text-red-400",unknown:"bg-white/10 border-white/20 text-gray-400"},_={ok:"bg-emerald-400",warning:"bg-amber-400",error:"bg-red-400",unknown:"bg-gray-500"};var c=Me(),l=d(c),f=v(l,2),y=d(f,!0);n(f),n(c),T(()=>{V(c,1,`
		inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm
		border ${b[o.state]??""}
	`),Y(c,"title",x()),V(l,1,`
			w-2 h-2 rounded-full
			${_[o.state]??""}
			${o.state==="ok"?"animate-pulse-slow":""}
		`),J(y,o.label)}),i(g,c)}var We=z("<a><!> </a>"),Ie=z(`<div class="
							hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full
							bg-gradient-to-r from-royal-400/20 to-royal-600/20
							border border-royal-400/30
						"><span class="w-2 h-2 rounded-full bg-royal-400 animate-pulse"></span> <span class="text-sm font-medium"> </span></div>`),Re=z('<!> <span class="hidden sm:inline">Logout</span>',1),Be=z("<a><!> </a>"),De=z('<nav class="sticky top-0 z-40 glass border-b border-white/5"><div class="max-w-7xl mx-auto px-4 sm:px-6"><div class="flex items-center justify-between h-16 gap-4"><div class="flex-shrink-0"><span class="text-lg font-bold tracking-wider uppercase text-white">Actindo <span class="text-royal-400">Middleware</span></span></div> <div class="hidden md:flex items-center gap-1"></div> <div class="flex items-center gap-3"><div class="hidden lg:flex items-center gap-2"><!> <!></div> <!> <!></div></div></div> <div class="md:hidden border-t border-white/5"><div class="flex overflow-x-auto px-4 py-2 gap-2"></div></div></nav>');function qe(g,o){ie(o,!0);const x=()=>C(ee,"$dashboardStore",l),b=()=>C(we,"$permissions",l),_=()=>C($e,"$currentUser",l),c=()=>C(fe,"$page",l),[l,f]=ue();let y=p(()=>x().summary),$=p(b),W=p(_);const O=[{href:"/",label:"Dashboard",icon:je},{href:"/products",label:"Products",icon:Pe},{href:"/customers",label:"Customers",icon:ze},{href:"/jobs",label:"Jobs",icon:ke},{href:"/sync",label:"Sync",icon:Ue,writeOnly:!0},{href:"/users",label:"Users",icon:Ce,adminOnly:!0},{href:"/settings",label:"Settings",icon:Oe,adminOnly:!0}];function I(a){return a==="/"?c().url.pathname==="/":c().url.pathname.startsWith(a)}async function E(){await Z.logout(),window.location.href="/login"}var R=De(),B=d(R),m=d(B),h=v(d(m),2);re(h,21,()=>O,ae,(a,t)=>{var r=P(),s=w(r);{var K=k=>{var u=We(),F=d(u);oe(F,()=>e(t).icon,(U,X)=>{X(U,{size:16})});var Q=v(F);n(u),T(U=>{Y(u,"href",e(t).href),V(u,1,`
								flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium
								uppercase tracking-wide transition-all
								${U??""}
							`),J(Q,` ${e(t).label??""}`)},[()=>I(e(t).href)?"bg-royal-600/30 text-white border border-royal-600/50":"text-gray-400 hover:text-white hover:bg-white/5"]),i(k,u)};M(s,k=>{(!e(t).adminOnly||e($).isAdmin)&&(!e(t).writeOnly||e($).canWrite)&&k(K)})}i(a,r)}),n(h);var N=v(h,2),D=d(N),H=d(D);{let a=p(()=>{var r,s;return((s=(r=e(y))==null?void 0:r.actindo)==null?void 0:s.state)??"unknown"}),t=p(()=>{var r,s;return((s=(r=e(y))==null?void 0:r.actindo)==null?void 0:s.message)??"Status wird geladen..."});ne(H,{get state(){return e(a)},label:"Actindo",get tooltip(){return e(t)}})}var S=v(H,2);{let a=p(()=>{var r,s;return((s=(r=e(y))==null?void 0:r.oauth)==null?void 0:s.state)??"unknown"}),t=p(()=>{var r,s;return((s=(r=e(y))==null?void 0:r.oauth)==null?void 0:s.message)??"Status wird geladen..."});ne(S,{get state(){return e(a)},label:"Token",get tooltip(){return e(t)}})}n(D);var A=v(D,2);{var q=a=>{var t=Ie(),r=v(d(t),2),s=d(r,!0);n(r),n(t),T(()=>J(s,e(W).username)),i(a,t)};M(A,a=>{e(W)&&a(q)})}var G=v(A,2);Ae(G,{variant:"ghost",size:"small",onclick:E,children:(a,t)=>{var r=Re(),s=w(r);Le(s,{size:16}),le(2),i(a,r)},$$slots:{default:!0}}),n(N),n(m),n(B);var j=v(B,2),L=d(j);re(L,21,()=>O,ae,(a,t)=>{var r=P(),s=w(r);{var K=k=>{var u=Be(),F=d(u);oe(F,()=>e(t).icon,(U,X)=>{X(U,{size:14})});var Q=v(F);n(u),T(U=>{Y(u,"href",e(t).href),V(u,1,`
							flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium
							uppercase tracking-wide whitespace-nowrap transition-all
							${U??""}
						`),J(Q,` ${e(t).label??""}`)},[()=>I(e(t).href)?"bg-royal-600/30 text-white border border-royal-600/50":"text-gray-400 hover:text-white hover:bg-white/5"]),i(k,u)};M(s,k=>{(!e(t).adminOnly||e($).isAdmin)&&(!e(t).writeOnly||e($).canWrite)&&k(K)})}i(a,r)}),n(L),n(j),n(R),i(g,R),de(),f()}var Fe=z('<div class="min-h-screen flex items-center justify-center"><!></div>'),He=z('<div class="min-h-screen flex flex-col"><!> <main class="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 py-8"><!></main> <footer class="py-4 text-center text-sm text-gray-500 border-t border-white/5">Powered by FC Schalke 04 | Software & Development</footer></div>');function dt(g,o){ie(o,!0);const x=()=>C(Z,"$authStore",c),b=()=>C(Se,"$isAuthenticated",c),_=()=>C(fe,"$page",c),[c,l]=ue(),f=["/login","/register"];let y=p(()=>x().initialized),$=p(b),W=p(()=>_().url.pathname),O=p(()=>f.some(m=>e(W).startsWith(m)));he(async()=>{await Z.init()}),te(()=>{e(y)&&!e($)&&!e(O)&&ye(`/login?returnUrl=${encodeURIComponent(e(W))}`)}),te(()=>{if(e($)&&!e(O))return ee.startPolling(),()=>ee.stopPolling()});var I=P();_e("12qhfyh",m=>{ge(()=>{xe.title="Actindo Middleware"})});var E=w(I);{var R=m=>{var h=Fe(),N=d(h);Ne(N,{size:"large"}),n(h),i(m,h)},B=m=>{var h=P(),N=w(h);{var D=S=>{var A=P(),q=w(A);se(q,()=>o.children),i(S,A)},H=S=>{var A=P(),q=w(A);{var G=j=>{var L=He(),a=d(L);qe(a,{});var t=v(a,2),r=d(t);se(r,()=>o.children),n(t),le(2),n(L),i(j,L)};M(q,j=>{e($)&&j(G)},!0)}i(S,A)};M(N,S=>{e(O)?S(D):S(H,!1)},!0)}i(m,h)};M(E,m=>{e(y)?m(B,!1):m(R)})}i(g,I),de(),l()}export{dt as component};
