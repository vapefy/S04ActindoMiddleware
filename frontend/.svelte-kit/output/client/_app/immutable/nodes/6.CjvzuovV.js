import{c as T,a as r,d as ia,f as d,t as Q,s as p}from"../chunks/B35PcQGF.js";import{o as da}from"../chunks/lRhbJWai.js";import{f as b,p as va,s as E,c as pt,d as ca,e as pa,i as n,g as x,$ as fa,j as t,k as e,r as a,u as K,n as H,t as m}from"../chunks/BZjX7xHU.js";import{l as ua,s as _a,i as u}from"../chunks/D9uJM2wH.js";import{I as xa,s as ma,h as ga,p as Ct,e as It,f as ha,i as zt}from"../chunks/DQl7avGA.js";import{f as Lt}from"../chunks/BWqZDye-.js";import{P as ya,R as Vt}from"../chunks/CP3XHTay.js";import{C as ba,A as wa}from"../chunks/kp9I4jKG.js";import{B as $a}from"../chunks/D5w3vmtt.js";import{I as ka}from"../chunks/x5lqHpA1.js";import{B as ft}from"../chunks/DAS_cPG8.js";import{S as Pa}from"../chunks/BMMDD9hE.js";import{S as Ca}from"../chunks/CcT_CqqL.js";import{P as Ia}from"../chunks/D00jxTIR.js";import"../chunks/_G6KF_sA.js";import{C as za}from"../chunks/x500Jt59.js";function La(W,q){const A=ua(q,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m6 9 6 6 6-6"}]];xa(W,_a({name:"chevron-down"},()=>A,{get iconNode(){return z},children:(B,k)=>{var f=T(),L=b(f);ma(L,q,"default",{}),r(B,f)},$$slots:{default:!0}}))}var Va=d("<!> Aktualisieren",1),Aa=d('<div class="flex justify-center py-12"><!></div>'),Ba=d('<div class="text-center py-12 text-gray-400"><!> <p> </p></div>'),Sa=d('<button type="button" class="p-1 rounded hover:bg-white/10 transition-colors"><!></button>'),Na=d('<span class="ml-2 text-xs text-gray-500"> </span>'),Ma=d("<!> <!>",1),ja=d('<span class="text-gray-500">-</span>'),Ea=d('<span class="font-mono text-sm"> </span>'),Ka=d('<span class="text-gray-500">-</span>'),Ua=d('<span class="text-gray-500">-</span>'),Da=d('<span class="font-mono text-sm"> </span>'),Fa=d('<span class="text-gray-500">-</span>'),Ra=d('<tr class="border-b border-white/5 bg-royal-900/20"><td class="py-2 px-4"></td><td class="py-2 px-4"><span class="font-mono text-sm text-gray-400 pl-4"><span class="text-royal-600 mr-1">â””</span> </span></td><td class="py-2 px-4"><!></td><td class="py-2 px-4"><!></td><td class="py-2 px-4"><!></td><td class="py-2 px-4 text-sm text-gray-400"> </td></tr>'),Ha=d('<tr class="border-b border-white/5 hover:bg-white/5 transition-colors"><td class="py-3 px-4"><!></td><td class="py-3 px-4"><span> </span></td><td class="py-3 px-4"> </td><td class="py-3 px-4"><!></td><td class="py-3 px-4"><!></td><td class="py-3 px-4 text-sm text-gray-400"> </td></tr> <!>',1),qa=d('<div class="overflow-x-auto"><table class="w-full"><thead><tr class="border-b border-white/10"><th class="text-left py-3 px-4 text-xs uppercase tracking-wider text-gray-400 font-medium w-10"></th><th class="text-left py-3 px-4 text-xs uppercase tracking-wider text-gray-400 font-medium">SKU</th><th class="text-left py-3 px-4 text-xs uppercase tracking-wider text-gray-400 font-medium">Name</th><th class="text-left py-3 px-4 text-xs uppercase tracking-wider text-gray-400 font-medium">Status</th><th class="text-left py-3 px-4 text-xs uppercase tracking-wider text-gray-400 font-medium">Actindo ID</th><th class="text-left py-3 px-4 text-xs uppercase tracking-wider text-gray-400 font-medium">Erstellt</th></tr></thead><tbody></tbody></table></div> <div class="mt-4 pt-4 border-t border-white/10 text-sm text-gray-400"><span> </span></div>',1),Ga=d('<div class="mb-6"><div class="relative max-w-md"><!> <!></div></div> <!>',1),Ja=d("<!> <!> <!>",1);function de(W,q){va(q,!0);let A=E(pt([])),z=E(!0),B=E(""),k=E(""),f=E(pt({})),L=E(pt({})),X=K(()=>t(k).trim()?t(A).filter(s=>s.sku.toLowerCase().includes(t(k).toLowerCase())||s.name.toLowerCase().includes(t(k).toLowerCase())||s.variantCode&&s.variantCode.toLowerCase().includes(t(k).toLowerCase())):t(A));da(()=>{ut()});async function ut(){x(z,!0),x(B,""),x(f,{},!0);try{x(A,await Ct.list(),!0)}catch(s){x(B,s instanceof Error?s.message:"Fehler beim Laden",!0)}finally{x(z,!1)}}async function At(s){if(t(f)[s]){const{[s]:g,...w}=t(f);x(f,w,!0)}else{x(L,{...t(L),[s]:!0},!0);try{const g=await Ct.getVariants(s);x(f,{...t(f),[s]:g},!0)}catch(g){console.error("Failed to load variants:",g)}finally{const{[s]:g,...w}=t(L);x(L,w,!0)}}}function Bt(s){switch(s){case"master":return{variant:"primary",label:"Master"};case"child":return{variant:"default",label:"Variante"};default:return null}}var _t=Ja();ga("1dj9mz1",s=>{pa(()=>{fa.title="Products | Actindo Middleware"})});var xt=b(_t);ya(xt,{title:"Produkte",subtitle:"Uebersicht aller erstellten Produkte",actions:g=>{$a(g,{variant:"ghost",onclick:ut,get disabled(){return t(z)},children:(w,V)=>{var U=Va(),G=b(U);{let Y=K(()=>t(z)?"animate-spin":"");Vt(G,{size:16,get class(){return t(Y)}})}H(),r(w,U)},$$slots:{default:!0}})}});var mt=n(xt,2);{var St=s=>{wa(s,{variant:"error",class:"mb-6",children:(g,w)=>{H();var V=Q();m(()=>p(V,t(B))),r(g,V)},$$slots:{default:!0}})};u(mt,s=>{t(B)&&s(St)})}var Nt=n(mt,2);ba(Nt,{children:(s,g)=>{var w=Ga(),V=b(w),U=e(V),G=e(U);Ca(G,{size:18,class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"});var Y=n(G,2);ka(Y,{type:"search",placeholder:"Suche nach SKU, Name oder Variantencode...",class:"pl-11",get value(){return t(k)},set value(P){x(k,P,!0)}}),a(U),a(V);var Mt=n(V,2);{var jt=P=>{var S=Aa(),Z=e(S);Pa(Z,{}),a(S),r(P,S)},Et=P=>{var S=T(),Z=b(S);{var Kt=N=>{var M=Ba(),j=e(M);Ia(j,{size:48,class:"mx-auto mb-4 opacity-50"});var D=n(j,2),J=e(D,!0);a(D),a(M),m(()=>p(J,t(k)?"Keine Produkte gefunden":"Noch keine Produkte vorhanden")),r(N,M)},Ut=N=>{var M=qa(),j=b(M),D=e(j),J=n(e(D));It(J,21,()=>t(X),zt,(Ft,v)=>{const yt=K(()=>!!t(f)[t(v).sku]),bt=K(()=>!!t(L)[t(v).sku]),tt=K(()=>t(v).variantStatus==="master"),at=K(()=>Bt(t(v).variantStatus));var wt=Ha(),et=b(wt),rt=e(et),Rt=e(rt);{var Ht=o=>{var l=Sa();l.__click=()=>At(t(v).sku);var C=e(l);{var F=c=>{Vt(c,{size:16,class:"animate-spin text-gray-400"})},h=c=>{var _=T(),$=b(_);{var dt=I=>{La(I,{size:16,class:"text-royal-400"})},R=I=>{za(I,{size:16,class:"text-gray-400"})};u($,I=>{t(yt)?I(dt):I(R,!1)},!0)}r(c,_)};u(C,c=>{t(bt)?c(F):c(h,!1)})}a(l),m(()=>l.disabled=t(bt)),r(o,l)};u(Rt,o=>{t(tt)&&t(v).variantCount&&t(v).variantCount>0&&o(Ht)})}a(rt);var st=n(rt),ot=e(st),qt=e(ot,!0);a(ot),a(st);var nt=n(st),Gt=e(nt,!0);a(nt);var lt=n(nt),Jt=e(lt);{var Ot=o=>{var l=Ma(),C=b(l);ft(C,{get variant(){return t(at).variant},children:(c,_)=>{H();var $=Q();m(()=>p($,t(at).label)),r(c,$)},$$slots:{default:!0}});var F=n(C,2);{var h=c=>{var _=Na(),$=e(_);a(_),m(()=>p($,`(${t(v).variantCount??""} Varianten)`)),r(c,_)};u(F,c=>{t(tt)&&t(v).variantCount&&c(h)})}r(o,l)},Qt=o=>{var l=ja();r(o,l)};u(Jt,o=>{t(at)?o(Ot):o(Qt,!1)})}a(lt);var it=n(lt),Tt=e(it);{var Wt=o=>{var l=Ea(),C=e(l,!0);a(l),m(()=>p(C,t(v).productId)),r(o,l)},Xt=o=>{var l=Ka();r(o,l)};u(Tt,o=>{t(v).productId?o(Wt):o(Xt,!1)})}a(it);var $t=n(it),Yt=e($t,!0);a($t),a(et);var Zt=n(et,2);{var ta=o=>{var l=T(),C=b(l);It(C,17,()=>t(f)[t(v).sku],zt,(F,h)=>{var c=Ra(),_=n(e(c)),$=e(_),dt=n(e($));a($),a(_);var R=n(_),I=e(R);{var aa=i=>{ft(i,{variant:"default",class:"font-mono text-xs",children:(y,O)=>{H();var Pt=Q();m(()=>p(Pt,t(h).variantCode)),r(y,Pt)},$$slots:{default:!0}})},ea=i=>{var y=Ua();r(i,y)};u(I,i=>{t(h).variantCode?i(aa):i(ea,!1)})}a(R);var vt=n(R),ra=e(vt);ft(ra,{variant:"default",children:(i,y)=>{H();var O=Q("Variante");r(i,O)},$$slots:{default:!0}}),a(vt);var ct=n(vt),sa=e(ct);{var oa=i=>{var y=Da(),O=e(y,!0);a(y),m(()=>p(O,t(h).productId)),r(i,y)},na=i=>{var y=Fa();r(i,y)};u(sa,i=>{t(h).productId?i(oa):i(na,!1)})}a(ct);var kt=n(ct),la=e(kt,!0);a(kt),a(c),m(i=>{p(dt,` ${t(h).sku??""}`),p(la,i)},[()=>Lt(t(h).createdAt)]),r(F,c)}),r(o,l)};u(Zt,o=>{t(yt)&&t(f)[t(v).sku]&&o(ta)})}m(o=>{ha(ot,1,`font-mono text-sm ${t(tt)?"text-royal-300 font-semibold":"text-royal-300"}`),p(qt,t(v).sku),p(Gt,t(v).name||"-"),p(Yt,o)},[()=>Lt(t(v).createdAt)]),r(Ft,wt)}),a(J),a(D),a(j);var gt=n(j,2),ht=e(gt),Dt=e(ht);a(ht),a(gt),m(()=>p(Dt,`${t(X).length??""} Produkte`)),r(N,M)};u(Z,N=>{t(X).length===0?N(Kt):N(Ut,!1)},!0)}r(P,S)};u(Mt,P=>{t(z)&&t(A).length===0?P(jt):P(Et,!1)})}r(s,w)},$$slots:{default:!0}}),r(W,_t),ca()}ia(["click"]);export{de as component};
